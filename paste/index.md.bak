---
title: 日报粘贴板
layout: page
---

<div id="paste-app" style="max-width:800px;margin:2rem auto;">
  <h2>把内容粘贴到这里</h2>
  <textarea id="paste-input" placeholder="Ctrl/⌘+V 粘贴…" 
            style="width:100%;height:220px;padding:12px;box-sizing:border-box;"></textarea>
  <div style="margin-top:8px;">
    <button id="copy-btn">复制到剪贴板</button>
    <span id="count-tip" style="margin-left:12px;color:#888;">0 字符</span>
  </div>

  <h3 style="margin-top:24px;">预览</h3>
  <pre id="preview" style="white-space:pre-wrap;border:1px solid #eee;padding:12px;"></pre>
</div>

<script>
(function () {
  var input = document.getElementById('paste-input');
  var preview = document.getElementById('preview');
  var countTip = document.getElementById('count-tip');
  var copyBtn = document.getElementById('copy-btn');

  // 自动聚焦，方便用户直接 Ctrl/⌘+V
  input && input.focus();

  function render() {
    var text = input.value || '';
    preview.textContent = text;
    countTip.textContent = text.length + ' 字符';
    // 可选：本地持久化，刷新不丢
    try { localStorage.setItem('paste_text', text); } catch (e) {}
  }

  // 粘贴与输入时更新
  input.addEventListener('input', render);
  input.addEventListener('paste', function(){ setTimeout(render, 0); });

  // 从本地恢复
  try {
    var cached = localStorage.getItem('paste_text');
    if (cached) { input.value = cached; render(); }
  } catch (e) {}

  // 一键复制
  copyBtn.addEventListener('click', async function(){
    try {
      await navigator.clipboard.writeText(input.value || '');
      copyBtn.textContent = '已复制！';
      setTimeout(function(){ copyBtn.textContent = '复制到剪贴板'; }, 1500);
    } catch (e) {
      alert('复制失败，请手动全选复制。');
    }
  });
})();
</script>
